# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# Specifies the runtime configuration for the backend.
runConfig:
  # The maximum number of container instances that can be running at the same time.
  # Increase this value to automatically scale up in response to increased traffic.
  # For production apps, a value higher than 1 is recommended.
  maxInstances: 2

# Defines environment variables for the backend.
# For production, it's highly recommended to use Secret Manager for sensitive data.
# The 'secret' field specifies the name of the secret in Google Cloud Secret Manager.
env:
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: FIREBASE_API_KEY
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    secret: FIREBASE_AUTH_DOMAIN
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    secret: FIREBASE_PROJECT_ID
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    secret: FIREBASE_STORAGE_BUCKET
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    secret: FIREBASE_MESSAGING_SENDER_ID
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    secret: FIREBASE_APP_ID

# To make this work, you must create these secrets in Google Cloud Secret Manager:
# 1. Go to the Google Cloud Console for your project.
# 2. Navigate to "Security" > "Secret Manager".
# 3. Create secrets with the names specified above (e.g., FIREBASE_API_KEY).
# 4. For the value of each secret, paste the corresponding value from your .env file.
# 5. Ensure the App Hosting service agent has permission to access these secrets.
#    (This is usually granted automatically, but can be checked in IAM settings).
