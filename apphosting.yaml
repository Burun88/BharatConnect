# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# --- PERMISSIONS GUIDE ---
# If your app needs to access other Google Cloud services (like Storage, Firestore Admin, etc.),
# you must grant permissions to the App Hosting service account.

# 1. FIND YOUR SERVICE ACCOUNT:
#    - Go to the IAM & Admin page in Google Cloud Console: https://console.cloud.google.com/iam-admin/iam
#    - Find the principal with the email: service-YOUR_PROJECT_NUMBER@gcp-sa-apphosting.iam.gserviceaccount.com

# 2. GRANT SECRET ACCESS:
#    - For EACH secret below, go to Secret Manager, click the secret, go to the PERMISSIONS tab,
#    - and grant the 'Secret Manager Secret Accessor' role to the service account from Step 1.
#    - This allows the build process to access your environment variables.

# 3. GRANT STORAGE ACCESS (To Fix `storage/unknown` Upload Errors):
#    - Go back to the IAM & Admin page.
#    - Find your App Hosting service account again and click the pencil icon (Edit principal).
#    - Click '+ ADD ANOTHER ROLE'.
#    - In the filter, search for and select the 'Storage Object Admin' role.
#    - Click 'Save'. This allows your running application to upload and delete files.
# --- END PERMISSIONS GUIDE ---

# Specifies the runtime configuration for the backend.
runConfig:
  maxInstances: 2

# Defines environment variables for the backend.
# For production, it's highly recommended to use Secret Manager for sensitive data.
# The 'secret' field specifies the name of the secret in Google Cloud Secret Manager.
env:
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: AIzaSyCmVRTIvMTgZ_IBhzlc-Ml0yt106l0EyOk
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    secret: bharatconnect-i8510.firebaseapp.com
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    secret: bharatconnect-i8510
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    secret: bharatconnect-i8510.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    secret: 1011856991455
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    secret: 1:1011856991455:web:b8611aad228c31ccbf756a"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_DATABASE_URL
    secret: https://bharatconnect-i8510-default-rtdb.asia-southeast1.firebasedatabase.app
    availability:
      - BUILD
      - RUNTIME
